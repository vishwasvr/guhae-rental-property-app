<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Property Details - Guhae</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <link rel="alternate icon" href="favicon.ico" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .navbar-brand {
        font-weight: 800;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .property-header {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
        padding: 2rem;
      }

      .sidebar {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        padding: 1.5rem;
        height: fit-content;
        position: sticky;
        top: 2rem;
      }

      .content-area {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        padding: 2rem;
        min-height: 500px;
      }

      .nav-item {
        margin-bottom: 0.5rem;
      }

      .nav-link {
        color: #6c757d;
        border: none;
        border-radius: 10px;
        padding: 12px 16px;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
        text-decoration: none;
      }

      .nav-link:hover {
        background: #f8f9fa;
        color: #495057;
        transform: translateX(5px);
      }

      .nav-link.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
      }

      .nav-link i {
        margin-right: 10px;
        width: 20px;
      }

      .property-title {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 700;
      }

      .stat-card {
        background: white;
        border-radius: 12px;
        border: 1px solid #e3e6f0;
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .loading-placeholder {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 200px;
        color: #6c757d;
      }

      .breadcrumb {
        background: transparent;
        padding: 0;
        margin-bottom: 1rem;
      }

      .breadcrumb-item a {
        color: #6c757d;
        text-decoration: none;
      }

      .breadcrumb-item.active {
        color: #495057;
        font-weight: 600;
      }

      @media (max-width: 768px) {
        .sidebar {
          margin-bottom: 2rem;
          position: relative;
          top: auto;
        }

        .nav-link {
          justify-content: center;
          text-align: center;
        }

        .nav-link i {
          margin-right: 5px;
        }
      }
    </style>
  </head>

  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="dashboard.html">
          <i class="fas fa-home me-2"></i>Guhae
        </a>

        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="dashboard.html">
            <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
          </a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
      <!-- Breadcrumb -->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="dashboard.html"
              ><i class="fas fa-home me-1"></i>Dashboard</a
            >
          </li>
          <li
            class="breadcrumb-item active"
            aria-current="page"
            id="propertyBreadcrumb"
          >
            Property Details
          </li>
        </ol>
      </nav>

      <!-- Property Header -->
      <div class="property-header">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h1 class="property-title mb-2" id="propertyTitle">Loading...</h1>
            <p class="text-muted mb-2" id="propertyAddress">
              <i class="fas fa-map-marker-alt me-2"></i>Loading address...
            </p>
            <div class="d-flex flex-wrap gap-2">
              <span class="badge bg-info" id="propertyType">Loading...</span>
              <span class="badge bg-success" id="propertyStatus"
                >Loading...</span
              >
            </div>
          </div>
          <div class="col-md-4 text-end">
            <h3 class="text-success mb-0" id="propertyRent">Loading...</h3>
            <small class="text-muted">Monthly Rent</small>
          </div>
        </div>
      </div>

      <div class="row">
        <!-- Sidebar Navigation -->
        <div class="col-lg-3 col-md-4">
          <div class="sidebar">
            <h6 class="text-muted mb-3 text-uppercase fw-bold">
              Property Management
            </h6>
            <nav class="nav flex-column">
              <a class="nav-link active" href="#" data-tab="overview">
                <i class="fas fa-tachometer-alt"></i>Overview
              </a>
              <a class="nav-link" href="#" data-tab="tenants">
                <i class="fas fa-users"></i>Tenants
              </a>
              <a class="nav-link" href="#" data-tab="finances">
                <i class="fas fa-chart-line"></i>Finances
              </a>
              <a class="nav-link" href="#" data-tab="income">
                <i class="fas fa-dollar-sign"></i>Income
              </a>
              <a class="nav-link" href="#" data-tab="expenses">
                <i class="fas fa-receipt"></i>Expenses
              </a>
              <a class="nav-link" href="#" data-tab="maintenance">
                <i class="fas fa-tools"></i>Maintenance
              </a>
            </nav>

            <hr class="my-4" />

            <div class="d-grid gap-2">
              <button class="btn btn-primary btn-sm" id="editPropertyBtn">
                <i class="fas fa-edit me-2"></i>Edit Property
              </button>
              <button
                class="btn btn-outline-secondary btn-sm"
                id="addTenantBtn"
              >
                <i class="fas fa-user-plus me-2"></i>Add Tenant
              </button>
            </div>
          </div>
        </div>

        <!-- Content Area -->
        <div class="col-lg-9 col-md-8">
          <div class="content-area">
            <!-- Overview Tab (Default) -->
            <div id="tab-overview" class="tab-content active">
              <div
                class="d-flex justify-content-between align-items-center mb-4"
              >
                <h4>
                  <i class="fas fa-tachometer-alt me-2"></i>Property Overview
                </h4>
                <button
                  class="btn btn-outline-primary btn-sm"
                  id="refreshDataBtn"
                >
                  <i class="fas fa-sync-alt me-2"></i>Refresh
                </button>
              </div>

              <!-- Quick Stats -->
              <div class="row mb-4">
                <div class="col-md-3 col-sm-6 mb-3">
                  <div class="stat-card p-3 text-center">
                    <div class="text-primary mb-2">
                      <i class="fas fa-users fa-2x"></i>
                    </div>
                    <h5 class="mb-1" id="tenantCount">0</h5>
                    <small class="text-muted">Active Tenants</small>
                  </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                  <div class="stat-card p-3 text-center">
                    <div class="text-success mb-2">
                      <i class="fas fa-dollar-sign fa-2x"></i>
                    </div>
                    <h5 class="mb-1" id="monthlyIncome">$0</h5>
                    <small class="text-muted">Monthly Income</small>
                  </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                  <div class="stat-card p-3 text-center">
                    <div class="text-warning mb-2">
                      <i class="fas fa-exclamation-triangle fa-2x"></i>
                    </div>
                    <h5 class="mb-1" id="maintenanceRequests">0</h5>
                    <small class="text-muted">Open Requests</small>
                  </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-3">
                  <div class="stat-card p-3 text-center">
                    <div class="text-info mb-2">
                      <i class="fas fa-calendar-alt fa-2x"></i>
                    </div>
                    <h5 class="mb-1" id="occupancyRate">0%</h5>
                    <small class="text-muted">Occupancy Rate</small>
                  </div>
                </div>
              </div>

              <!-- Property Details -->
              <div class="row">
                <div class="col-md-6">
                  <h6 class="text-muted mb-3">Property Information</h6>
                  <div id="propertyDetails">
                    <!-- Property details will be loaded here -->
                  </div>
                </div>
                <div class="col-md-6">
                  <h6 class="text-muted mb-3">Recent Activity</h6>
                  <div id="recentActivity" class="loading-placeholder">
                    <div>
                      <i class="fas fa-clock fa-2x mb-2"></i>
                      <p>No recent activity</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Placeholder tabs for future development -->
            <div id="tab-tenants" class="tab-content" style="display: none">
              <h4><i class="fas fa-users me-2"></i>Tenant Management</h4>
              <div class="loading-placeholder">
                <div class="text-center">
                  <i class="fas fa-users fa-3x mb-3 text-muted"></i>
                  <h5>Tenant Management</h5>
                  <p class="text-muted">
                    Coming Soon - Manage tenant information, leases, and
                    communications
                  </p>
                </div>
              </div>
            </div>

            <div id="tab-finances" class="tab-content" style="display: none">
              <h4><i class="fas fa-chart-line me-2"></i>Property Finance</h4>

              <!-- Finance Overview Cards -->
              <div class="row mb-4">
                <div class="col-md-4">
                  <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                      <i class="fas fa-building fa-2x text-primary mb-2"></i>
                      <h6 class="card-title">Ownership</h6>
                      <p class="card-text" id="ownershipType">Loading...</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                      <i
                        class="fas fa-hand-holding-usd fa-2x text-success mb-2"
                      ></i>
                      <h6 class="card-title">Status</h6>
                      <p class="card-text" id="ownershipStatus">Loading...</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                      <i class="fas fa-calculator fa-2x text-info mb-2"></i>
                      <h6 class="card-title">Total Loans</h6>
                      <p class="card-text" id="totalLoanBalance">Loading...</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Purchase Information Section -->
              <div class="card mb-4">
                <div
                  class="card-header d-flex justify-content-between align-items-center"
                >
                  <h5 class="mb-0">
                    <i class="fas fa-shopping-cart me-2"></i>Purchase
                    Information
                  </h5>
                  <button
                    class="btn btn-outline-primary btn-sm"
                    id="editPurchaseBtn"
                  >
                    <i class="fas fa-edit me-1"></i>Edit
                  </button>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="mb-3">
                        <label class="form-label text-muted"
                          >Purchase Price</label
                        >
                        <div id="purchasePrice" class="fw-bold">-</div>
                      </div>
                      <div class="mb-3">
                        <label class="form-label text-muted"
                          >Purchase Date</label
                        >
                        <div id="purchaseDate">-</div>
                      </div>
                      <div class="mb-3">
                        <label class="form-label text-muted">Builder</label>
                        <div id="builder">-</div>
                      </div>
                      <div class="mb-3">
                        <label class="form-label text-muted">Seller</label>
                        <div id="seller">-</div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="mb-3">
                        <label class="form-label text-muted">Buyer Agent</label>
                        <div id="buyerAgent">-</div>
                      </div>
                      <div class="mb-3">
                        <label class="form-label text-muted"
                          >Seller Agent</label
                        >
                        <div id="sellerAgent">-</div>
                      </div>
                      <div class="mb-3">
                        <label class="form-label text-muted"
                          >Title Company</label
                        >
                        <div id="titleCompany">-</div>
                      </div>
                      <div class="mb-3">
                        <label class="form-label text-muted"
                          >Closing Costs</label
                        >
                        <div id="closingCosts">-</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Loans Section -->
              <div class="card">
                <div
                  class="card-header d-flex justify-content-between align-items-center"
                >
                  <h5 class="mb-0">
                    <i class="fas fa-university me-2"></i>Loans
                  </h5>
                  <button class="btn btn-primary btn-sm" id="addLoanBtn">
                    <i class="fas fa-plus me-1"></i>Add Loan
                  </button>
                </div>
                <div class="card-body">
                  <div id="loansContainer">
                    <div class="text-center text-muted py-4">
                      <i class="fas fa-university fa-2x mb-3"></i>
                      <p>No loans added yet</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Finance Loading State -->
              <div
                id="financeLoadingState"
                class="text-center py-5"
                style="display: none"
              >
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2 text-muted">Loading financial data...</p>
              </div>
            </div>

            <div id="tab-income" class="tab-content" style="display: none">
              <h4><i class="fas fa-dollar-sign me-2"></i>Income Tracking</h4>
              <div class="loading-placeholder">
                <div class="text-center">
                  <i class="fas fa-dollar-sign fa-3x mb-3 text-muted"></i>
                  <h5>Income Management</h5>
                  <p class="text-muted">
                    Coming Soon - Track rent payments, late fees, and other
                    income
                  </p>
                </div>
              </div>
            </div>

            <div id="tab-expenses" class="tab-content" style="display: none">
              <h4><i class="fas fa-receipt me-2"></i>Expense Management</h4>
              <div class="loading-placeholder">
                <div class="text-center">
                  <i class="fas fa-receipt fa-3x mb-3 text-muted"></i>
                  <h5>Expense Tracking</h5>
                  <p class="text-muted">
                    Coming Soon - Track maintenance costs, taxes, and
                    operational expenses
                  </p>
                </div>
              </div>
            </div>

            <div id="tab-maintenance" class="tab-content" style="display: none">
              <h4><i class="fas fa-tools me-2"></i>Maintenance Requests</h4>
              <div class="loading-placeholder">
                <div class="text-center">
                  <i class="fas fa-tools fa-3x mb-3 text-muted"></i>
                  <h5>Maintenance Management</h5>
                  <p class="text-muted">
                    Coming Soon - Handle maintenance requests, schedule repairs,
                    and track costs
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Property Modal -->
    <div
      class="modal fade"
      id="editPropertyModal"
      tabindex="-1"
      aria-labelledby="editPropertyModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editPropertyModalLabel">
              <i class="fas fa-edit me-2"></i>Edit Property
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editPropertyForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editTitle" class="form-label"
                    >Property Title</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="editTitle"
                    required
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="editPropertyType" class="form-label"
                    >Property Type</label
                  >
                  <select class="form-select" id="editPropertyType" required>
                    <option value="">Select Property Type</option>
                    <option value="apartment">Apartment</option>
                    <option value="house">House</option>
                    <option value="townhouse">Townhouse</option>
                    <option value="condo">Condo</option>
                    <option value="studio">Studio</option>
                    <option value="duplex">Duplex</option>
                  </select>
                </div>
              </div>

              <div class="mb-3">
                <label for="editDescription" class="form-label"
                  >Description</label
                >
                <textarea
                  class="form-control"
                  id="editDescription"
                  rows="3"
                ></textarea>
              </div>

              <div class="row">
                <div class="col-md-4 mb-3">
                  <label for="editRent" class="form-label"
                    >Monthly Rent ($)</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editRent"
                    min="0"
                    step="0.01"
                  />
                </div>
                <div class="col-md-4 mb-3">
                  <label for="editBedrooms" class="form-label">Bedrooms</label>
                  <input
                    type="number"
                    class="form-control"
                    id="editBedrooms"
                    min="0"
                    max="10"
                  />
                </div>
                <div class="col-md-4 mb-3">
                  <label for="editBathrooms" class="form-label"
                    >Bathrooms</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editBathrooms"
                    min="0"
                    max="10"
                    step="0.5"
                  />
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editSquareFeet" class="form-label"
                    >Square Feet</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editSquareFeet"
                    min="0"
                  />
                </div>
              </div>

              <!-- Address Information -->
              <div class="mb-3">
                <h6 class="text-muted mb-3">Address Information</h6>
                <div
                  class="alert alert-info py-2 px-3 mb-3"
                  id="addressNote"
                  style="display: none; font-size: 0.875em"
                >
                  <i class="fas fa-info-circle me-2"></i>
                  <strong>Note:</strong> Please fill in the address details to
                  update the property location information.
                </div>
                <div class="mb-3">
                  <label for="editStreetAddress" class="form-label"
                    >Street Address</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="editStreetAddress"
                    placeholder="123 Main Street"
                  />
                </div>

                <div class="row">
                  <div class="col-md-3">
                    <label for="editCity" class="form-label">City</label>
                    <input
                      type="text"
                      class="form-control"
                      id="editCity"
                      placeholder="City"
                    />
                  </div>

                  <div class="col-md-3">
                    <label for="editCounty" class="form-label">County</label>
                    <input
                      type="text"
                      class="form-control"
                      id="editCounty"
                      placeholder="County"
                    />
                  </div>

                  <div class="col-md-3">
                    <label for="editState" class="form-label">State</label>
                    <select class="form-select" id="editState">
                      <option value="">Select State</option>
                    </select>
                  </div>

                  <div class="col-md-3">
                    <label for="editZipCode" class="form-label">Zip Code</label>
                    <input
                      type="text"
                      class="form-control"
                      id="editZipCode"
                      placeholder="12345"
                      pattern="[0-9]{5}(-[0-9]{4})?"
                      title="Please enter a valid zip code (12345 or 12345-6789)"
                    />
                  </div>
                </div>
              </div>

              <!-- Garage Information -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editGarageType" class="form-label"
                    >Garage Type</label
                  >
                  <select class="form-select" id="editGarageType">
                    <option value="">No Garage</option>
                    <option value="attached">Attached</option>
                    <option value="detached">Detached</option>
                    <option value="carport">Carport</option>
                    <option value="covered">Covered Parking</option>
                    <option value="underground">Underground</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="editGarageCars" class="form-label"
                    >Number of Cars</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editGarageCars"
                    min="0"
                    max="10"
                    placeholder="0"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              <i class="fas fa-times me-2"></i>Cancel
            </button>
            <button type="button" class="btn btn-primary" id="savePropertyBtn">
              <i class="fas fa-save me-2"></i>Save Changes
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Purchase Info Modal -->
    <div
      class="modal fade"
      id="editPurchaseModal"
      tabindex="-1"
      aria-labelledby="editPurchaseModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editPurchaseModalLabel">
              <i class="fas fa-shopping-cart me-2"></i>Edit Purchase Information
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editPurchaseForm">
              <!-- Ownership Information -->
              <div class="mb-4">
                <h6 class="text-muted mb-3">Ownership Details</h6>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="editOwnershipType" class="form-label"
                      >Ownership Type</label
                    >
                    <select class="form-select" id="editOwnershipType" required>
                      <option value="">Select ownership type</option>
                      <option value="individual">Individual</option>
                      <option value="joint">Joint Ownership</option>
                      <option value="llc">LLC</option>
                      <option value="corporation">Corporation</option>
                      <option value="partnership">Partnership</option>
                      <option value="trust">Trust</option>
                    </select>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="editOwnershipStatus" class="form-label"
                      >Ownership Status</label
                    >
                    <select
                      class="form-select"
                      id="editOwnershipStatus"
                      required
                    >
                      <option value="">Select status</option>
                      <option value="owned">Owned Outright</option>
                      <option value="financed">Financed</option>
                      <option value="leased">Leased</option>
                      <option value="contract">Contract for Deed</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Purchase Information -->
              <div class="mb-4">
                <h6 class="text-muted mb-3">Purchase Details</h6>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="editPurchasePrice" class="form-label"
                      >Purchase Price</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editPurchasePrice"
                      min="0"
                      step="0.01"
                      placeholder="0.00"
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="editPurchaseDate" class="form-label"
                      >Purchase Date</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="editPurchaseDate"
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="editDownPayment" class="form-label"
                      >Down Payment</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editDownPayment"
                      min="0"
                      step="0.01"
                      placeholder="0.00"
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="editClosingCosts" class="form-label"
                      >Closing Costs</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editClosingCosts"
                      min="0"
                      step="0.01"
                      placeholder="0.00"
                    />
                  </div>
                </div>
              </div>

              <!-- Parties Involved -->
              <div class="mb-3">
                <h6 class="text-muted mb-3">Parties Involved</h6>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="editBuilder" class="form-label">Builder</label>
                    <input type="text" class="form-control" id="editBuilder" />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="editSeller" class="form-label">Seller</label>
                    <input type="text" class="form-control" id="editSeller" />
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="editBuyerAgent" class="form-label"
                      >Buyer Agent</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="editBuyerAgent"
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="editSellerAgent" class="form-label"
                      >Seller Agent</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="editSellerAgent"
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="editTitleCompany" class="form-label"
                      >Title Company</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="editTitleCompany"
                    />
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              <i class="fas fa-times me-2"></i>Cancel
            </button>
            <button type="button" class="btn btn-primary" id="savePurchaseBtn">
              <i class="fas fa-save me-2"></i>Save Changes
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add/Edit Loan Modal -->
    <div
      class="modal fade"
      id="editLoanModal"
      tabindex="-1"
      aria-labelledby="editLoanModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editLoanModalLabel">
              <i class="fas fa-university me-2"></i
              ><span id="loanModalTitle">Add Loan</span>
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editLoanForm">
              <input type="hidden" id="editLoanId" />

              <!-- Loan Basic Information -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editLender" class="form-label">Lender *</label>
                  <input
                    type="text"
                    class="form-control"
                    id="editLender"
                    required
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="editLoanType" class="form-label"
                    >Loan Type *</label
                  >
                  <select class="form-select" id="editLoanType" required>
                    <option value="">Select loan type</option>
                    <option value="conventional">Conventional</option>
                    <option value="fha">FHA</option>
                    <option value="va">VA</option>
                    <option value="usda">USDA</option>
                    <option value="portfolio">Portfolio</option>
                    <option value="hard-money">Hard Money</option>
                    <option value="heloc">HELOC</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>

              <!-- Loan Amounts -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editOriginalAmount" class="form-label"
                    >Original Amount *</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editOriginalAmount"
                    min="0"
                    step="0.01"
                    required
                    placeholder="0.00"
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="editCurrentBalance" class="form-label"
                    >Current Balance *</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editCurrentBalance"
                    min="0"
                    step="0.01"
                    required
                    placeholder="0.00"
                  />
                </div>
              </div>

              <!-- Loan Terms -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editInterestRate" class="form-label"
                    >Interest Rate (%) *</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editInterestRate"
                    min="0"
                    max="100"
                    step="0.001"
                    required
                    placeholder="0.000"
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="editTermYears" class="form-label"
                    >Term (Years)</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editTermYears"
                    min="1"
                    max="50"
                    placeholder="30"
                  />
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editMonthlyPayment" class="form-label"
                    >Monthly Payment</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="editMonthlyPayment"
                    min="0"
                    step="0.01"
                    placeholder="0.00"
                  />
                </div>
              </div>

              <!-- Loan Dates -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="editStartDate" class="form-label"
                    >Start Date</label
                  >
                  <input type="date" class="form-control" id="editStartDate" />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="editMaturityDate" class="form-label"
                    >Maturity Date</label
                  >
                  <input
                    type="date"
                    class="form-control"
                    id="editMaturityDate"
                  />
                </div>
              </div>

              <!-- Loan Status -->
              <div class="mb-3">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="editIsActive"
                    checked
                  />
                  <label class="form-check-label" for="editIsActive">
                    Loan is active
                  </label>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              <i class="fas fa-times me-2"></i>Cancel
            </button>
            <button type="button" class="btn btn-primary" id="saveLoanBtn">
              <i class="fas fa-save me-2"></i>Save Loan
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/data.js"></script>
    <script src="static/js/utils.js"></script>
    <script src="static/js/components.js"></script>
    <script src="static/js/models.js"></script>
    <script src="static/js/services.js"></script>
    <script src="static/js/property_detail.js"></script>
  </body>
</html>
